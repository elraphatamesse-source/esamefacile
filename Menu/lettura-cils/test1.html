<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prova di Comprensione Scritta - Test Italiano</title>
    <style>
        body {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 10px auto 20px auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 20px;
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 1.8em;
            font-weight: 300;
        }

        .header p {
            margin: 8px 0 0 0;
            opacity: 0.9;
            font-size: 1em;
        }

        .content {
            padding: 25px;
            margin-top: 80px;
        }

        .question {
            margin-bottom: 20px;
            padding: 18px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
        }

        .question:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .question-number {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
            margin-right: 8px;
        }

        .question-text {
            font-size: 1em;
            margin-bottom: 15px;
            color: #2c3e50;
            line-height: 1.5;
        }

        .options {
            display: grid;
            gap: 8px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .option:hover {
            border-color: #3498db;
            background: #f0f8ff;
        }

        .option input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.2);
            accent-color: #3498db;
        }

        .option.selected {
            border-color: #3498db;
            background: #e3f2fd;
        }

        .submit-section {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e9ecef;
        }

        .submit-btn {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(46, 204, 113, 0.4);
        }

        .submit-btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 15px;
            display: none;
        }

        .score {
            font-size: 1.5em;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .correct {
            border-color: #27ae60 !important;
            background: #d5f4e6 !important;
        }

        .incorrect {
            border-color: #e74c3c !important;
            background: #fadbd8 !important;
        }

        .reading-text {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            line-height: 1.6;
            font-size: 1em;
            text-align: justify;
        }

        .reading-text h3 {
            color: #2c3e50;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .test-nav-btn {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            color: #2c3e50;
            padding: 12px 25px;
            margin: 0 10px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .test-nav-btn:hover {
            background: #d5dbdb;
            border-color: #95a5a6;
        }

        .test-nav-btn.active {
            background: linear-gradient(135deg, #3498db, #2980b9);
            border-color: #3498db;
            color: white;
        }

        .test-nav-btn.completed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-color: #27ae60;
            color: white;
        }

        #backBtn:hover {
            background: rgba(255,255,255,0.3) !important;
            border-color: rgba(255,255,255,0.5) !important;
            transform: translateY(-50%) scale(1.05) !important;
        }

        .timer-warning {
            background: #f39c12 !important;
        }

        .timer-critical {
            background: #e74c3c !important;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .test-container {
            display: none;
        }

        .test-container.active {
            display: block;
        }

        .text-part {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            line-height: 1.5;
            text-align: justify;
        }

        .text-part-header {
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .order-select {
            padding: 5px 10px;
            border: 2px solid #3498db;
            border-radius: 5px;
            background: white;
            font-weight: bold;
            color: #2c3e50;
        }

        @media (max-width: 768px) {
            .container {
                margin: 5px auto 20px auto;
                border-radius: 12px;
            }
            
            .header {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 1.5em;
            }
            
            .content {
                padding: 15px;
                margin-top: 100px;
            }
            
            .question {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .option {
                padding: 10px;
                font-size: 0.9em;
            }

            .reading-text {
                padding: 15px;
                font-size: 0.95em;
            }

            #timerContainer {
                top: 10px !important;
                right: 10px !important;
                padding: 8px 12px !important;
                min-width: 120px !important;
            }

            #timerContainer #timerDisplay {
                font-size: 1.3em !important;
                margin-bottom: 3px !important;
            }

            #timerContainer div:nth-child(2) {
                font-size: 0.7em !important;
            }

            #backBtn {
                bottom: 10px !important;
                left: 10px !important;
                padding: 10px 15px !important;
                font-size: 0.85em !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📖 Comprensione della lettura</h1>
            <p>Devi eseguire tutte le tre prove prima di cliccare su <strong> Termina Esame</strong></p>
        </div>

        <div class="content">
            <!-- Timer Display -->
            <div id="timerContainer" style="position: fixed; top: 20px; right: 20px; background: #3498db; color: white; padding: 15px 20px; border-radius: 15px; z-index: 1000; box-shadow: 0 5px 20px rgba(0,0,0,0.3); min-width: 200px;">
                <div style="font-size: 1.8em; font-weight: bold; margin-bottom: 5px; text-align: center;" id="timerDisplay">50:00</div>
                <div style="font-size: 0.85em; text-align: center; opacity: 0.9;">Tempo rimanente</div>
                <!-- Progress Bar -->
                <div id="progressContainer" style="margin-top: 12px; background: rgba(255,255,255,0.2); height: 4px; border-radius: 2px; overflow: hidden;">
                    <div id="progressBar" style="height: 100%; background: white; width: 0%; transition: width 1s ease; border-radius: 2px;"></div>
                </div>
            </div>

            <!-- Back Button -->
            <button id="backBtn" onclick="window.location.href='lettura.html'" style="position: fixed; bottom: 20px; left: 20px; background: rgba(44, 62, 80, 0.9); color: white; border: 2px solid rgba(255,255,255,0.3); padding: 12px 20px; border-radius: 25px; cursor: pointer; font-size: 0.9em; font-weight: 500; transition: all 0.3s ease; z-index: 1000; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
                ← Indietro
            </button>

            <!-- Test Navigation -->
            <div style="text-align: center; margin-bottom: 20px;">
                <button class="test-nav-btn active" id="test1Btn">
                    <span>Prova 1</span>
                </button>
                <button class="test-nav-btn" id="test2Btn">
                    <span>Prova 2</span>
                </button>
                <button class="test-nav-btn" id="test3Btn">
                    <span>Prova 3</span>
                </button>
                <button class="test-nav-btn" id="resultsBtn" style="display: none; background: linear-gradient(135deg, #8e44ad, #9b59b6); border-color: #8e44ad; color: white;">
                    <span>📊 Risultati</span>
                </button>
            </div>

            <!-- Instructions -->
            <div id="testInstructions" style="background: #e8f4fd; border: 2px solid #3498db; border-radius: 10px; padding: 15px; margin-bottom: 25px; text-align: center; font-weight: 500; color: #2c3e50;">
                <span id="instructionText">Leggi i testi e rispondi alle domande. Puoi navigare liberamente tra le prove.</span>
            </div>

            <div id="test1" class="test-container active">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 20px; font-size: 1.4em;">Prova n. 1</h2>
                
                <div class="reading-text">
                    <h3>BARGELLO VINCE SUL WEB LA HIT DELLA SODDISFAZIONE</h3>
                    <p>Il museo che dà più soddisfazione in Italia è il Bargello, a Firenze. L'ex tribunale e carcere, dove brilla il David di Donatello, è il museo con il migliore grado di soddisfazione della visita, secondo i turisti che commentano sui social network. In una competizione mondiale in cui i viaggiatori non si fidano più solo della tradizionale guida ma cercano online, avere commenti positivi sul web significa trasmettere una bella immagine di sé. E la migliore in Italia è quella, appunto, del Museo Nazionale del Bargello, ma è tutto il "sistema" dei musei italiani ad avere un voto positivo. Peccato però che musei, gallerie e pinacoteche non sempre rispondano ai commenti positivi o alle lamentele dei turisti: semplicemente, li ignorano. E questo, a lungo andare, può essere un punto debole nel futuro dei musei italiani.</p>
                    
                    <p>A stilare la classifica della soddisfazione dei turisti con i dati presi dalla rete è stata l'agenzia di marketing e comunicazione Travel Appeal. "Abbiamo preso i 20 musei statali che hanno cambiato i direttori adesso, quelli che hanno completa autonomia, ed abbiamo inserito altri 4 musei innovativi, come il Muse o il Museo del Cinema di Torino che non è neanche statale" spiega Mirko Lalli. Travel Appeal ha poi raccolto oltre 24 mila commenti, recensioni, tweet e post presenti sui vari social network e li ha confrontati con quelli di un anno fa.</p>
                    
                    <p>Il risultato è che il Bargello ha un grado di soddisfazione positivo del 94%, stacca la Galleria nazionale dell'Umbria di 4 punti così come la Reggia di Caserta e la Galleria Estense. Persino esperienze innovative come il bellissimo Museo delle scienze di Trento, il Muse, è dietro, come lo sono gli Uffizi, con un risultato ottimo (77%) ma ben inferiore. Il problema è che, a fronte di queste recensioni e commenti in gran parte positivi, non si sfrutta la possibilità di ri-twittarli, commentarli a propria volta, o rispondergli. Un'attività che farebbe aumentare visibilità e fiducia. Ma perché solo lo 0,2% dei commenti ha avuto una risposta dagli stessi musei, con una media di attesa di almeno 6 giorni? "Alle recensioni non si risponde per un problema culturale. - spiega Lalli - Chi è che dovrebbe rispondere? Il direttore?". Forse ci vorrebbe una figura specifica. "Si tratta di un problema culturale. I musei dovrebbero essere pronti a gestire nuove situazioni. Però il dato positivo è che abbiamo una grande reputazione, tutti i musei hanno punteggi molto alti. Insomma, sono percepiti bene sul web nonostante siano poco attivi sulla rete".</p>
                    
                    <p>Verrebbe da dire: sono belli, basta quello. Ma la bellezza non basterà nel futuro. "È importante agire sul web perché, esattamente come accade ad un hotel, vieni scelto dai turisti per come appari sulla rete. L'apprezzamento dei visitatori è importante perché la prima cosa che fai quando arrivi in un posto è digitare su Google e capire cosa puoi vedere. E anche quel motore di ricerca usa le recensioni per dare risultati" insiste Lalli. E se l'apprezzamento cade, cadi anche nella graduatoria dei motori di ricerca.</p>
                    
                    <p>Certo, il quadro è confortante: rispetto ad un anno fa molti indicatori (accoglienza, spazi, servizi e postazione) sono rimasti stabili, alcuni, come gli eventi e l'accessibilità, sono migliorati. Peggiorata è solo la ristorazione. Ma il dato più strano è che i musei italiani, tra i meno costosi del mondo, hanno il "voto" peggiore proprio sui biglietti: "È la dimostrazione dell'errore di comunicazione. Se sai comunicare bene, il consumatore capisce il prezzo di cosa paga". Cosa ci sarebbe allora da fare adesso? "Vedere le recensioni intanto, e imparare a comunicare meglio con un sito web fatto bene e attraverso i social. E questo, purtroppo, nelle strutture italiane, è ancora molto lontano dalla realtà".</p>
                </div>

                <form id="testForm1">
                    <div class="question">
                        <div class="question-text"><span class="question-number">1.</span> Secondo una recente indagine risulta che il Museo del Bargello di Firenze</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q1" value="A">
                                <span>A) ha realizzato il miglior sito internet tra i musei italiani.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="B">
                                <span>B) è il museo italiano più cliccato sui motori di ricerca.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="C">
                                <span>C) è il museo più apprezzato nei commenti sui social network.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="D">
                                <span>D) ha avuto il record di visitatori sia reali che virtuali nell'ultimo anno.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">2.</span> Secondo l'articolo una possibile criticità nel futuro dei musei italiani è</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q2" value="A">
                                <span>A) dedicare scarsa attenzione all'immagine del museo su internet.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="B">
                                <span>B) curare poco i servizi multimediali ed interattivi per i visitatori.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="C">
                                <span>C) sottovalutare l'importanza di rispondere alle osservazioni dei visitatori.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="D">
                                <span>D) lavorare in modo autonomo senza sentirsi parte di un sistema museale.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">3.</span> Per la sua indagine l'agenzia Travel Appeal ha preso in considerazione</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q3" value="A">
                                <span>A) tutti i musei pubblici e privati presenti sul territorio italiano.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="B">
                                <span>B) una selezione di musei con gestione autonoma e innovativa.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="C">
                                <span>C) i grandi musei statali e non statali con un'alta affluenza di visitatori.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="D">
                                <span>D) i musei che hanno recentemente cambiato il proprio sito internet.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">4.</span> Secondo Mirko Lalli, i musei italiani anche se hanno recensioni positive, avrebbero bisogno</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q4" value="A">
                                <span>A) di adeguarsi rapidamente alle esigenze dei visitatori.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="B">
                                <span>B) di avere personale specializzato che risponde ai visitatori sul web.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="C">
                                <span>C) di avere direttori con competenze nel settore della comunicazione.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="D">
                                <span>D) di creare postazioni interattive per lo studio delle opere.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">5.</span> Secondo Lalli, per attirare più visitatori i musei dovrebbero</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q5" value="A">
                                <span>A) fare campagne pubblicitarie efficaci su internet.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="B">
                                <span>B) proporre visite e biglietti su siti di alberghi e di strutture ricettive.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="C">
                                <span>C) attrarre nuove fasce di pubblico attraverso eventi culturali.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="D">
                                <span>D) operare su internet per essere più visibili ai visitatori che interrogano la rete.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">6.</span> Rispetto allo scorso anno la soddisfazione dei visitatori risulta inferiore per</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q6" value="A">
                                <span>A) la qualità dei bar e dei ristoranti all'interno dei musei.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="B">
                                <span>B) le strutture di accoglienza e i servizi per i visitatori.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="C">
                                <span>C) l'organizzazione di mostre e manifestazioni culturali.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="D">
                                <span>D) le caratteristiche di grafica e di navigabilità del sito.</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">7.</span> Secondo Lalli i visitatori criticano il prezzo del biglietto dei musei italiani perché</div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q7" value="A">
                                <span>A) non comprendono la qualità delle opere e delle strutture museali.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="B">
                                <span>B) non fanno confronti con i prezzi dei biglietti dei musei di altri paesi.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="C">
                                <span>C) non sfruttano tutti i possibili ingressi compresi nel biglietto.</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="D">
                                <span>D) non approfittano degli sconti e delle offerte che i musei offrono.</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>

            <div id="test2" class="test-container">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 20px; font-size: 1.4em;">Prova n. 2</h2>
                
                <div class="reading-text">
                    <h3>STUDENTI STRANIERI NELLE UNIVERSITÀ ITALIANE</h3>
                    <p>Sei uno studente straniero e ti piacerebbe studiare in Italia? Ecco la guida all'immatricolazione degli studenti stranieri nelle università italiane. Per il triennio 2016-2019, gli studenti stranieri possono iscriversi presso le università italiane, statali e non statali autorizzate a rilasciare titoli con valore legale, e presso le Istituzioni italiane per l'alta formazione artistica e musicale, statali e non statali autorizzate, secondo la normativa che trovate sul sito www.studiare-in-italia.it.</p>
                    
                    <p><strong>POSTI DISPONIBILI</strong> - Tutte le università ogni anno comunicano, secondo i tempi stabiliti dal Ministero dell'Istruzione dell'Università e della Ricerca – MIUR – l'elenco dei posti riservati agli studenti stranieri per ciascun corso di laurea. Così gli studenti stranieri possono fare domanda di pre-iscrizione. Dopo aver compilato la graduatoria, le università pubblicizzano gli eventuali posti rimasti liberi per permettere agli studenti stranieri che si sono classificati in posizione non utile in graduatoria, di fare domanda di ammissione a un altro corso universitario nella stessa sede della prima domanda, oppure a un'altra sede per lo stesso corso o per un corso diverso.</p>
                    
                    <p><strong>TEMPISTICA E DOCUMENTAZIONE</strong> - I termini per l'iscrizione alle facoltà universitarie sono definiti in un calendario pubblicato annualmente dal MIUR. Invece, le iscrizioni ai Master e ai Dottorati seguono le scadenze previste dalle singole università per i relativi corsi. Tutti i documenti da presentare all'università sono presenti sul sito: www.studiare-in-italia.it. I documenti scritti in lingua straniera devono essere accompagnati da una traduzione ufficiale in lingua italiana (per questo rivolgersi alla Rappresentanza italiana competente per territorio). Le università specificano i casi in cui non è necessario presentare i documenti tradotti ufficialmente.</p>
                    
                    <p><strong>PERMESSO DI SOGGIORNO</strong> - Per potersi immatricolare, è necessario il visto di ingresso rilasciato per motivi di studio. Entro otto giorni dall'arrivo in Italia, gli studenti devono chiedere il permesso di soggiorno per studio al Questore della Provincia in cui si trovano. Per gli anni successivi al primo, gli studenti devono richiedere il rinnovo del permesso di soggiorno per l'intero anno (almeno sessanta giorni prima della scadenza) al Questore della Provincia in cui si trovano. Anche gli studenti stranieri che vogliono iscriversi a un corso di formazione post lauream (scuole di specializzazione, dottorati di ricerca, master), possono chiedere il rinnovo del permesso di soggiorno per motivi di studio.</p>
                    
                    <p><strong>N.B.</strong> Gli studenti comunitari possono accedere alle università italiane senza limiti di posti purché siano in possesso di titolo di studio valido. Inoltre, sono equiparati agli studenti comunitari i cittadini di Norvegia, Islanda e Liechtenstein, Svizzera, Repubblica di San Marino, i rifugiati e il personale in servizio nelle Rappresentanze diplomatiche estere e negli Organismi internazionali che hanno sede in Italia e relativi coniugi e figli.</p>
                </div>

                <form id="testForm2">
                    <div class="question">
                        <div class="question-text"><span class="question-number">1.</span> Le norme che regolano l'iscrizione degli studenti stranieri nelle università italiane hanno validità triennale.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q1" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q1" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">2.</span> Tramite il sito www.studiare-in-Italia.it uno studente straniero può conoscere le modalità per iscriversi alle università italiane.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q2" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q2" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">3.</span> Il MIUR decide il numero di studenti stranieri ammessi ai vari corsi di laurea.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q3" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q3" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">4.</span> Gli studenti stranieri esclusi dalla graduatoria dei vincitori non possono fare domanda per un altro corso.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q4" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q4" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">5.</span> Il termine per le iscrizioni ai corsi di laurea è stabilito dal MIUR.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q5" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q5" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">6.</span> Uno studente che non rientra in graduatoria può ripresentare la domanda per la stessa università l'anno successivo.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q6" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q6" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">7.</span> Uno studente che vuole iscriversi a un dottorato deve rispettare la data di scadenza indicata dall'università prescelta.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q7" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q7" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">8.</span> Le università mettono a disposizione un traduttore ufficiale per i documenti in lingua straniera.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q8" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q8" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">9.</span> In alcuni casi le università non richiedono agli studenti traduzioni ufficiali della documentazione.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q9" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q9" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">10.</span> Per immatricolarsi nelle università italiane gli studenti stranieri devono possedere il permesso di soggiorno.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q10" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q10" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">11.</span> Gli studenti del secondo anno devono rinnovare il permesso di soggiorno 60 giorni prima dell'inizio dei corsi.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q11" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q11" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">12.</span> Per il rinnovo del permesso di soggiorno gli studenti possono rivolgersi alle Segreterie che collaborano con la Questura.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q12" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q12" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">13.</span> Gli studenti stranieri possono richiedere il rinnovo del permesso di soggiorno se vogliono seguire un master.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q13" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q13" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>

                    <div class="question">
                        <div class="question-text"><span class="question-number">14.</span> Un rifugiato politico può iscriversi alle università italiane con le stesse modalità di un cittadino italiano.</div>
                        <div class="options" style="display: flex; gap: 30px; justify-content: center;">
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q14" value="V">
                                <span>Vero</span>
                            </label>
                            <label class="option" style="flex: none; width: auto;">
                                <input type="radio" name="q14" value="F">
                                <span>Falso</span>
                            </label>
                        </div>
                    </div>
                </form>
            </div>

            <div id="test3" class="test-container">
                <h2 style="text-align: center; color: #2c3e50; margin-bottom: 15px; font-size: 1.4em;">Prova n. 3</h2>
                
                <div class="reading-text">
                    <h3>SILVIO GAZZANIGA: UNO SCULTORE "MONDIALE"</h3>
                </div>

                <form id="testForm3">
                    <div class="text-part" style="border-color: #27ae60; background: #d5f4e6;">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">A.</span>
                            <select class="order-select" name="orderA" disabled style="background: #ecf0f1; color: #7f8c8d;">
                                <option value="1" selected>1 (esempio)</option>
                            </select>
                        </div>
                        <p>Non tutti sanno che a disegnare nel 1971 il trofeo di uno dei più importanti eventi sportivi, la Coppa del Mondo FIFA, è stato uno scultore italiano, il milanese Silvio Gazzaniga.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">B.</span>
                            <select class="order-select" name="orderB">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Finché ci sarà posto su questi spazi per scrivere i nomi delle nazionali, la coppa di Gazzaniga verrà messa in palio, probabilmente fino ai Mondiali del 2038. Interrogato su questo, il novantacinquenne Gazzaniga sorride e dice la sua.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">C.</span>
                            <select class="order-select" name="orderC">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Subito dopo il disegno, per rendere al meglio la particolarità scultorea, Gazzaniga pensò di preparare un modello formato con un calco in gesso da presentare alla commissione.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">D.</span>
                            <select class="order-select" name="orderD">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Per questa ragione, il 5 aprile del 1971 una commissione di esperti, si riunì nella sede della FIFA a Zurigo e bandì un concorso internazionale per la creazione di una nuova coppa del Mondo.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">E.</span>
                            <select class="order-select" name="orderE">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Proprio la possibilità di toccare il calco e impugnare così l'opera, oltre che semplicemente vederla, colpì i giudici della FIFA.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">F.</span>
                            <select class="order-select" name="orderF">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Non appena seppe di questo concorso, Gazzaniga si mise all'opera. Preparò un disegno in cui due giocatori alzano le braccia verso l'alto nella gioia della vittoria.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">G.</span>
                            <select class="order-select" name="orderG">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>L'anno prima, nel 1970 ai Mondiali del Messico, il Brasile aveva vinto per la terza volta la Coppa Rimet. Secondo il regolamento dell'epoca, dopo la terza vittoria, vi era la definitiva assegnazione della Rimet. Quell'anno, quindi, fu assegnata al Brasile.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">H.</span>
                            <select class="order-select" name="orderH">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Attorno e sotto questa base del trofeo, in appositi riquadri, vengono incisi, ciascuno nella lingua ufficiale della relativa nazione, i nomi delle nazionali che dal 1974 hanno vinto il trofeo.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">I.</span>
                            <select class="order-select" name="orderI">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>"Mi spiace sapere che la mia bambina andrà in pensione, ma è giusto così. Mi piacerebbe che a realizzare la nuova coppa fosse un giovane scultore perché sia espressione della sua epoca, come la mia lo è stata della fine del Novecento".</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">J.</span>
                            <select class="order-select" name="orderJ">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Così, tra le 53 proposte presentate, la commissione scelse il progetto di Gazzaniga. La coppa venne così fusa in oro massiccio a 18 carati per un'altezza di 36,8 centimetri. La base, invece, venne realizzata con due anelli di materiali semipreziosi.</p>
                    </div>

                    <div class="text-part">
                        <div class="text-part-header">
                            <span style="font-weight: bold; color: #e74c3c;">K.</span>
                            <select class="order-select" name="orderK">
                                <option value="">Ordine</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                            </select>
                        </div>
                        <p>Dopo l'assegnazione al Brasile, la FIFA ebbe quindi la necessità di creare un altro trofeo da assegnare alle squadre vincitrici dei successivi Mondiali.</p>
                    </div>
                </form>
            </div>

            <div id="results" class="results">
                <div class="score" id="scoreDisplay"></div>
                <div id="detailedResults" style="margin-top: 20px;"></div>
                <p style="text-align: center; color: #7f8c8d;">Le risposte corrette sono evidenziate in verde, quelle sbagliate in rosso.</p>
            </div>

            <div class="submit-section">
                <button class="submit-btn" id="submitBtn" onclick="endExam()">
                    🏁 Termina Esame
                </button>
            </div>
        </div>
    </div>

    <script>
        // Exam configuration
        const EXAM_DURATION = 50 * 60; // 50 minutes
        
        // Correct answers for all three tests
        const correctAnswers = {
            test1: {
                q1: 'C', q2: 'C', q3: 'B', q4: 'B', q5: 'D', q6: 'A', q7: 'A'
            },
            test2: {
                q1: 'V', q2: 'V', q3: 'F', q4: 'F', q5: 'V', q6: 'V', q7: 'V', q8: 'F', q9: 'V', q10: 'F', q11: 'F', q12: 'F', q13: 'V', q14: 'V'
            },
            test3: {
                orderA: '1', orderG: '2', orderK: '3', orderD: '4', orderF: '5', orderC: '6', orderE: '7', orderJ: '8', orderH: '9', orderB: '10', orderI: '11'
            }
        };

        // Exam state
        let examStarted = true;
        let timeRemaining = EXAM_DURATION;
        let currentTest = 1;
        let timerInterval;

        // Handle unique selection for Test 3 dropdowns
        function handleTest3Selection() {
            const selects = document.querySelectorAll('#test3 select:not([disabled])');
            
            function updateSelectOptions() {
                // Get all currently selected values (including the fixed value "1" for orderA)
                const selectedValues = ['1']; // orderA is always "1"
                
                // Add other selected values
                Array.from(selects)
                    .map(select => select.value)
                    .filter(value => value !== '')
                    .forEach(value => selectedValues.push(value));
                
                // Update each select
                selects.forEach(currentSelect => {
                    const currentValue = currentSelect.value;
                    const options = currentSelect.querySelectorAll('option');
                    
                    options.forEach(option => {
                        if (option.value === '') {
                            // Always keep the empty option enabled
                            option.disabled = false;
                            option.style.color = '';
                        } else if (selectedValues.includes(option.value) && option.value !== currentValue) {
                            // Disable if selected elsewhere
                            option.disabled = true;
                            option.style.color = '#bdc3c7';
                        } else {
                            // Enable if not selected elsewhere
                            option.disabled = false;
                            option.style.color = '';
                        }
                    });
                });
            }
            
            // Add event listeners
            selects.forEach(select => {
                select.addEventListener('change', function() {
                    updateSelectOptions();
                });
            });
            
            // Initial update
            updateSelectOptions();
        }

        // Initialize exam
        document.addEventListener('DOMContentLoaded', function() {
            // Auto-start exam immediately
            startExam();
            
            // Initialize Test 3 unique selection
            handleTest3Selection();
            
            // Add click handlers to options
            document.addEventListener('click', function(e) {
                if (e.target.closest('.option')) {
                    const option = e.target.closest('.option');
                    const radio = option.querySelector('input[type="radio"]');
                    radio.checked = true;
                    
                    // Remove selected class from siblings
                    const siblings = option.parentNode.querySelectorAll('.option');
                    siblings.forEach(sibling => sibling.classList.remove('selected'));
                    
                    // Add selected class to this option
                    option.classList.add('selected');
                }
            });

            // Test navigation buttons
            document.getElementById('test1Btn').addEventListener('click', () => showTest(1));
            document.getElementById('test2Btn').addEventListener('click', () => showTest(2));
            document.getElementById('test3Btn').addEventListener('click', () => showTest(3));
            document.getElementById('resultsBtn').addEventListener('click', showResults);
        });

        function startExam() {
            examStarted = true;
            document.getElementById('progressContainer').style.display = 'block';
            document.getElementById('submitBtn').style.display = 'inline-block';
            
            // Enable all test navigation buttons
            document.querySelectorAll('.test-nav-btn').forEach(btn => {
                if (btn.id !== 'resultsBtn') {
                    btn.disabled = false;
                }
            });
            
            // Start timer
            timerInterval = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            timeRemaining--;
            
            // Update display
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            const display = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('timerDisplay').textContent = display;
            
            // Update progress bar
            const progress = ((EXAM_DURATION - timeRemaining) / EXAM_DURATION) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            
            // Update timer color based on time remaining
            const timerContainer = document.getElementById('timerContainer');
            if (timeRemaining <= 300) { // 5 minutes
                timerContainer.style.background = '#e74c3c';
                timerContainer.style.animation = 'pulse 1s infinite';
            } else if (timeRemaining <= 600) { // 10 minutes
                timerContainer.style.background = '#f39c12';
                timerContainer.style.animation = 'none';
            }
            
            // End exam when time is up
            if (timeRemaining <= 0) {
                endExam();
            }
        }

        function showTest(testNumber) {
            currentTest = testNumber;
            
            // Hide all tests
            document.querySelectorAll('.test-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Show selected test
            document.getElementById(`test${testNumber}`).classList.add('active');
            
            // Show instructions when navigating to a test
            document.getElementById('testInstructions').style.display = 'block';
            
            // Update navigation buttons
            document.querySelectorAll('.test-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.getElementById(`test${testNumber}Btn`).classList.add('active');
            
            // Update instructions based on current test
            const instructionText = document.getElementById('instructionText');
            if (testNumber === 1) {
                instructionText.textContent = 'Leggi il testo e rispondi alle domande scegliendo la risposta corretta.';
            } else if (testNumber === 2) {
                instructionText.textContent = 'Leggi il testo e indica se le affermazioni sono vere o false.';
            } else if (testNumber === 3) {
                instructionText.textContent = 'Il testo è diviso in 11 parti. Le parti non sono in ordine. Leggi e ricostruisci il testo selezionando il numero d\'ordine accanto a ciascuna parte. Il paragrafo A è dato come esempio (ordine: 1)';
            }
        }

        function endExam() {
            clearInterval(timerInterval);
            examStarted = false;
            
            // Stop timer animation
            const timerContainer = document.getElementById('timerContainer');
            timerContainer.style.animation = 'none';
            
            // Hide submit button
            document.getElementById('submitBtn').style.display = 'none';
            
            // Mark all tests as completed
            document.querySelectorAll('.test-nav-btn').forEach(btn => {
                if (btn.id !== 'resultsBtn') {
                    btn.classList.add('completed');
                    btn.classList.remove('active');
                }
            });
            
            // Show and enable results button
            const resultsBtn = document.getElementById('resultsBtn');
            resultsBtn.style.display = 'inline-block';
            resultsBtn.disabled = false;
            resultsBtn.classList.add('active');
            
            // Calculate total score
            calculateFinalResults();
            
            // Show results
            showResults();
            
            // Disable all interactions
            document.querySelectorAll('input[type="radio"]').forEach(input => {
                input.disabled = true;
            });
            document.querySelectorAll('select').forEach(select => {
                select.disabled = true;
            });
        }

        function calculateFinalResults() {
            let totalScore = 0;
            let totalQuestions = 0;
            let detailedResults = '';
            
            // Check Test 1
            const form1 = document.getElementById('testForm1');
            const formData1 = new FormData(form1);
            const answers1 = correctAnswers.test1;
            let test1Score = 0;
            
            for (let i = 1; i <= 7; i++) {
                const questionName = `q${i}`;
                const userAnswer = formData1.get(questionName);
                const correctAnswer = answers1[questionName];
                
                const testContainer = document.getElementById('test1');
                const questionOptions = testContainer.querySelectorAll(`input[name="${questionName}"]`);
                
                questionOptions.forEach(option => {
                    const optionContainer = option.closest('.option');
                    
                    if (option.value === correctAnswer) {
                        optionContainer.classList.add('correct');
                    } else if (option.checked && option.value !== correctAnswer) {
                        optionContainer.classList.add('incorrect');
                    }
                });
                
                if (userAnswer === correctAnswer) {
                    test1Score++;
                }
            }
            
            totalScore += test1Score;
            totalQuestions += 7;
            
            // Check Test 2
            const form2 = document.getElementById('testForm2');
            const formData2 = new FormData(form2);
            const answers2 = correctAnswers.test2;
            let test2Score = 0;
            
            for (let i = 1; i <= 14; i++) {
                const questionName = `q${i}`;
                const userAnswer = formData2.get(questionName);
                const correctAnswer = answers2[questionName];
                
                const testContainer = document.getElementById('test2');
                const questionOptions = testContainer.querySelectorAll(`input[name="${questionName}"]`);
                
                questionOptions.forEach(option => {
                    const optionContainer = option.closest('.option');
                    
                    if (option.value === correctAnswer) {
                        optionContainer.classList.add('correct');
                    } else if (option.checked && option.value !== correctAnswer) {
                        optionContainer.classList.add('incorrect');
                    }
                });
                
                if (userAnswer === correctAnswer) {
                    test2Score++;
                }
            }
            
            totalScore += test2Score;
            totalQuestions += 14;
            
            // Check Test 3 (excluding orderA which is the example)
            const form3 = document.getElementById('testForm3');
            const formData3 = new FormData(form3);
            const answers3 = correctAnswers.test3;
            let test3Score = 0;
            
            const orderQuestions = ['orderB', 'orderC', 'orderD', 'orderE', 'orderF', 'orderG', 'orderH', 'orderI', 'orderJ', 'orderK'];
            
            orderQuestions.forEach(questionName => {
                const userAnswer = formData3.get(questionName);
                const correctAnswer = answers3[questionName];
                
                const select = document.querySelector(`select[name="${questionName}"]`);
                const textPart = select.closest('.text-part');
                
                if (userAnswer === correctAnswer) {
                    test3Score++;
                    textPart.style.borderColor = '#27ae60';
                    textPart.style.background = '#d5f4e6';
                } else {
                    textPart.style.borderColor = '#e74c3c';
                    textPart.style.background = '#fadbd8';
                }
                
                // Show correct answer in the select
                select.value = correctAnswer;
                
                // Add visual indicator for correct/incorrect
                const header = textPart.querySelector('.text-part-header');
                const indicator = document.createElement('span');
                indicator.style.marginLeft = '10px';
                indicator.style.fontWeight = 'bold';
                
                if (userAnswer === correctAnswer) {
                    indicator.textContent = '✓ Corretto';
                    indicator.style.color = '#27ae60';
                } else {
                    indicator.textContent = `✗ Risposta corretta: ${correctAnswer}`;
                    indicator.style.color = '#e74c3c';
                }
                
                header.appendChild(indicator);
            });

            
            totalScore += test3Score;
            totalQuestions += 10;
            
            detailedResults = `
                <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <strong>Prova 1:</strong> ${test1Score}/7
                </div>
                <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <strong>Prova 2:</strong> ${test2Score}/14
                </div>
                <div style="margin-bottom: 15px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <strong>Prova 3:</strong> ${test3Score}/10 <span style="color: #7f8c8d; font-size: 0.9em;">(paragrafo A escluso - esempio)</span>
                </div>
            `;
            
            // Display final results
            const finalPercentage = Math.round((totalScore / totalQuestions) * 100);
            const noteOn20 = Math.round((totalScore / totalQuestions) * 20 * 100) / 100; // Round to 2 decimal places
            let resultClass = '';
            let resultMessage = '';
            
            if (finalPercentage >= 80) {
                resultClass = 'color: #27ae60;';
                resultMessage = '🎉 Eccellente!';
            } else if (finalPercentage >= 70) {
                resultClass = 'color: #f39c12;';
                resultMessage = '👍 Buono!';
            } else if (finalPercentage >= 60) {
                resultClass = 'color: #e67e22;';
                resultMessage = '📚 Sufficiente';
            } else {
                resultClass = 'color: #e74c3c;';
                resultMessage = '📖 Da migliorare';
            }
            
            document.getElementById('scoreDisplay').innerHTML = `
                <div style="${resultClass} font-size: 1.8em; margin-bottom: 15px;">${resultMessage}</div>
                <div style="font-size: 1.4em; margin-bottom: 10px;">Punteggio Totale: ${totalScore}/${totalQuestions}</div>
                <div style="font-size: 1.2em; color: #7f8c8d;">Voto: ${noteOn20}/20</div>
            `;
            
            document.getElementById('detailedResults').innerHTML = detailedResults;
        }

        function showResults() {
            // Hide all test containers
            document.querySelectorAll('.test-container').forEach(container => {
                container.classList.remove('active');
            });
            
            // Hide instructions when showing results
            document.getElementById('testInstructions').style.display = 'none';
            
            // Show results
            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            
            // Update button states
            document.querySelectorAll('.test-nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('resultsBtn').classList.add('active');
        }

        // Manual test navigation during exam
        document.addEventListener('click', function(e) {
            if (e.target.closest('.test-nav-btn') && !e.target.closest('.test-nav-btn').disabled) {
                const btn = e.target.closest('.test-nav-btn');
                
                // Handle results button
                if (btn.id === 'resultsBtn') {
                    showResults();
                    return;
                }
                
                const testNumber = parseInt(btn.id.replace('test', '').replace('Btn', ''));
                showTest(testNumber);
                
                // Hide results when navigating to a test after exam completion
                if (timeRemaining <= 0) {
                    document.getElementById('results').style.display = 'none';
                }
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'985c763ee265d63e',t:'MTc1ODk5MTQyNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
